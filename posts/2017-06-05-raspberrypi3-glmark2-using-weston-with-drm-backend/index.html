<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>RaspberryPi3: GLMark2 using weston with DRM backend | oopsmonk</title><meta name=keywords content="RaspberryPi"><meta name=description content="How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.
With regards to hardware acceleration, We can enable VC4 driver through raspi-config.
# update system and raspi-config script $ sudo apt-get update && sudo apt-get upgrade $ sudo apt-get install raspi-config # enable Broadcom VC4 driver $ sudo raspi-config Advanced Options -> GL Driver -> GL (Full KMS) Test environment:
 2017-04-10-raspbian-jessie-lite HDMI 1080P 60Hz CPU/GPU use default settings(no overclock)  Test packages:"><meta name=author content="oopsmonk"><link rel=canonical href=https://oopsmonk.github.io/posts/2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend/><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><link rel=preload href=/images/bio-oopsmonk.jpg as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://oopsmonk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://oopsmonk.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://oopsmonk.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://oopsmonk.github.io/apple-touch-icon.png><link rel=mask-icon href=https://oopsmonk.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.3"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-59507590-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="RaspberryPi3: GLMark2 using weston with DRM backend"><meta property="og:description" content="How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.
With regards to hardware acceleration, We can enable VC4 driver through raspi-config.
# update system and raspi-config script $ sudo apt-get update && sudo apt-get upgrade $ sudo apt-get install raspi-config # enable Broadcom VC4 driver $ sudo raspi-config Advanced Options -> GL Driver -> GL (Full KMS) Test environment:
 2017-04-10-raspbian-jessie-lite HDMI 1080P 60Hz CPU/GPU use default settings(no overclock)  Test packages:"><meta property="og:type" content="article"><meta property="og:url" content="https://oopsmonk.github.io/posts/2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend/"><meta property="og:image" content="https://oopsmonk.github.io/images/bio-oopsmonk.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-06-05T09:39:30+08:00"><meta property="article:modified_time" content="2017-06-05T09:39:30+08:00"><meta property="og:site_name" content="Viva La Vida"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://oopsmonk.github.io/images/bio-oopsmonk.jpg"><meta name=twitter:title content="RaspberryPi3: GLMark2 using weston with DRM backend"><meta name=twitter:description content="How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.
With regards to hardware acceleration, We can enable VC4 driver through raspi-config.
# update system and raspi-config script $ sudo apt-get update && sudo apt-get upgrade $ sudo apt-get install raspi-config # enable Broadcom VC4 driver $ sudo raspi-config Advanced Options -> GL Driver -> GL (Full KMS) Test environment:
 2017-04-10-raspbian-jessie-lite HDMI 1080P 60Hz CPU/GPU use default settings(no overclock)  Test packages:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://oopsmonk.github.io/posts/"},{"@type":"ListItem","position":2,"name":"RaspberryPi3: GLMark2 using weston with DRM backend","item":"https://oopsmonk.github.io/posts/2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"RaspberryPi3: GLMark2 using weston with DRM backend","name":"RaspberryPi3: GLMark2 using weston with DRM backend","description":"How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.\nWith regards to hardware acceleration, We can enable VC4 driver through raspi-config.\n# update system and raspi-config script $ sudo apt-get update \u0026amp;\u0026amp; sudo apt-get upgrade $ sudo apt-get install raspi-config # enable Broadcom VC4 driver $ sudo raspi-config Advanced Options -\u0026gt; GL Driver -\u0026gt; GL (Full KMS) Test environment:\n 2017-04-10-raspbian-jessie-lite HDMI 1080P 60Hz CPU/GPU use default settings(no overclock)  Test packages:","keywords":["RaspberryPi"],"articleBody":"How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.\nWith regards to hardware acceleration, We can enable VC4 driver through raspi-config.\n# update system and raspi-config script $ sudo apt-get update \u0026\u0026 sudo apt-get upgrade $ sudo apt-get install raspi-config # enable Broadcom VC4 driver $ sudo raspi-config Advanced Options - GL Driver - GL (Full KMS) Test environment:\n 2017-04-10-raspbian-jessie-lite HDMI 1080P 60Hz CPU/GPU use default settings(no overclock)  Test packages:\n wayland 1.13.0 libdrm-2.4.81 mesa-17.1.1 pixman-0.34.0 cairo 1.15.4 weston 2.0.0  In my case, it took about 2.5 hours for clone and compile all packages, so go jogging is a great choice. :-)\nBuild script: RPi3_build_weston.sh\n$ cd ~ \u0026\u0026 sudo su # ./RPi3_build_weston.sh all Run weston $ sudo su # export XDG_RUNTIME_DIR=/tmp/weston_runtime # mkdir $XDG_RUNTIME_DIR \u0026\u0026 chmod 0700 $XDG_RUNTIME_DIR # export LD_LIBRARY_PATH=/usr/local/lib/ # weston --tty=2 --idle-time=0 -B drm-backend.so \u0026 Date: 2017-06-02 CST [09:52:59.501] weston 2.0.0 http://wayland.freedesktop.org Bug reports to: https://bugs.freedesktop.org/enter_bug.cgi?product=Wayland\u0026component=weston\u0026version=2.0.0 Build: 2.0.0 configure.ac: bump to version 2.0.0 for the official release (2017-02-24 16:19:03 -0800) [09:52:59.506] Command line: weston --tty=2 --idle-time=0 -B drm-backend.so [09:52:59.507] OS: Linux, 4.9.24-v7+, #993 SMP Wed Apr 26 18:01:23 BST 2017, armv7l [09:52:59.509] warning: XDG_RUNTIME_DIR \"/tmp/weston_runtime\" is not configured correctly. Unix access mode must be 0700 (current mode is 700), and must be owned by the user (current owner is UID 1001). Refer to your distribution on how to get it, or http://www.freedesktop.org/wiki/Specifications/basedir-spec on how to implement it. [09:52:59.513] Starting with no config file. [09:52:59.515] Output repaint window is 7 ms maximum. [09:52:59.516] Loading module '/usr/local/lib/libweston-2/drm-backend.so' [09:52:59.520] initializing drm backend [09:52:59.526] using /dev/dri/card0 [09:52:59.528] Loading module '/usr/local/lib/libweston-2/gl-renderer.so' [09:52:59.586] EGL client extensions: EGL_EXT_client_extensions EGL_EXT_platform_base EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug EGL_EXT_platform_wayland EGL_MESA_platform_gbm [09:52:59.588] warning: neither EGL_EXT_swap_buffers_with_damage or EGL_KHR_swap_buffers_with_damage is supported. Performance could be affected. [09:52:59.588] EGL_KHR_surfaceless_context available [09:52:59.596] EGL version: 1.4 (DRI2) [09:52:59.596] EGL vendor: Mesa Project [09:52:59.596] EGL client APIs: OpenGL OpenGL_ES [09:52:59.597] EGL extensions: EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_cl_event2 EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display [09:52:59.597] GL version: OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148) [09:52:59.598] GLSL version: OpenGL ES GLSL ES 1.0.16 [09:52:59.598] GL vendor: Broadcom [09:52:59.598] GL renderer: Gallium 0.4 on VC4 V3D 2.1 [09:52:59.598] GL extensions: GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_npot GL_OES_vertex_half_float GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_EXT_frag_depth GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_OES_surfaceless_context GL_EXT_separate_shader_objects GL_EXT_compressed_ETC1_RGB8_sub_texture GL_EXT_draw_elements_base_vertex GL_EXT_texture_border_clamp GL_KHR_context_flush_control GL_OES_draw_elements_base_vertex GL_OES_texture_border_clamp [09:52:59.599] GL ES 2 renderer features: read-back format: BGRA wl_shm sub-image to texture: yes EGL Wayland extension: yes [09:52:59.601] event0 - [09:52:59.601] USB Keyboard: [09:52:59.601] is tagged by udev as: Keyboard [09:52:59.601] event0 - [09:52:59.601] USB Keyboard: [09:52:59.601] device is a keyboard [09:52:59.602] event1 - [09:52:59.602] USB Keyboard: [09:52:59.602] is tagged by udev as: Keyboard [09:52:59.602] event1 - [09:52:59.602] USB Keyboard: [09:52:59.602] device is a keyboard [09:52:59.603] event2 - [09:52:59.603] USB Optical Mouse: [09:52:59.603] is tagged by udev as: Mouse [09:52:59.603] event2 - [09:52:59.604] USB Optical Mouse: [09:52:59.604] device is a pointer [09:52:59.654] Registered plugin API 'weston_drm_output_api_v1' of size 12 [09:52:59.655] Chosen EGL config details: RGBA bits: 8 8 8 0 swap interval range: 0 - 0 [09:52:59.655] Failed to initialize backlight [09:52:59.655] EDID data 'BNQ', 'BenQ GW2265', '87E05314019' [09:52:59.656] Output HDMI-A-1, (connector 24, crtc 65) mode 1920x1080@60.0, preferred, current mode 1920x1080@59.9 mode 1920x1080@60.0 mode 1920x1080@59.9 mode 1920x1080@50.0 mode 1920x1080@50.0 mode 1680x1050@59.9 mode 1600x900@60.0 mode 1280x1024@60.0 mode 1280x800@59.9 mode 1280x720@60.0 mode 1280x720@59.9 mode 1280x720@50.0 mode 1024x768@60.0 mode 800x600@60.3 mode 720x576@50.0 mode 720x576@50.0 mode 720x480@60.0 mode 720x480@59.9 mode 720x480@60.0 mode 720x480@59.9 mode 640x480@60.0 mode 640x480@59.9 [09:52:59.656] Compositor capabilities: arbitrary surface rotation: yes screen capture uses y-flip: yes presentation clock: CLOCK_MONOTONIC, id 1 presentation clock resolution: 0.000000001 s [09:52:59.657] Loading module '/usr/local/lib/weston/desktop-shell.so' [09:52:59.658] launching '/usr/local/libexec/weston-keyboard' [09:52:59.660] launching '/usr/local/libexec/weston-desktop-shell' could not load cursor 'dnd-move' could not load cursor 'dnd-copy' could not load cursor 'dnd-none' could not load cursor 'dnd-move' could not load cursor 'dnd-copy' could not load cursor 'dnd-none' xkbcommon: ERROR: couldn't find a Compose file for locale \"en_US.UTF-8\" could not create XKB compose table for locale 'en_US.UTF-8'. Disabiling compose xkbcommon: ERROR: couldn't find a Compose file for locale \"en_US.UTF-8\" could not create XKB compose table for locale 'en_US.UTF-8'. Disabiling compose could not load cursor 'dnd-move' could not load cursor 'dnd-copy' could not load cursor 'dnd-none' xkbcommon: ERROR: couldn't find a Compose file for locale \"en_US.UTF-8\" could not create XKB compose table for locale 'en_US.UTF-8'. Disabiling compose weston-simple-egl score root@RPi3:/home/oopsmonk# weston-simple-egl has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage 152 frames in 5 seconds: 30.400000 fps 151 frames in 5 seconds: 30.200001 fps 151 frames in 5 seconds: 30.200001 fps ^Csimple-egl exiting root@RPi3:/home/oopsmonk# weston-simple-egl -b has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage 32542 frames in 5 seconds: 6508.399902 fps Draw call returned Invalid argument. Expect corruption. 30634 frames in 5 seconds: 6126.799805 fps 28265 frames in 5 seconds: 5653.000000 fps 34501 frames in 5 seconds: 6900.200195 fps 32658 frames in 5 seconds: 6531.600098 fps ^Csimple-egl exiting root@RPi3:/home/oopsmonk# weston-simple-egl -f has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage 300 frames in 5 seconds: 60.000000 fps 300 frames in 5 seconds: 60.000000 fps 300 frames in 5 seconds: 60.000000 fps 300 frames in 5 seconds: 60.000000 fps 300 frames in 5 seconds: 60.000000 fps ^Csimple-egl exiting root@RPi3:/home/oopsmonk# weston-simple-egl -f -b has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage 1350 frames in 5 seconds: 270.000000 fps 1325 frames in 5 seconds: 265.000000 fps 1325 frames in 5 seconds: 265.000000 fps ^Csimple-egl exiting GLMark2 root@RPi3:/home/oopsmonk# glmark2-es2-wayland ======================================================= glmark2 2014.03 ======================================================= OpenGL Information GL_VENDOR: Broadcom GL_RENDERER: Gallium 0.4 on VC4 V3D 2.1 GL_VERSION: OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148) ======================================================= [build] use-vbo=false: FPS: 281 FrameTime: 3.559 ms [build] use-vbo=true: FPS: 303 FrameTime: 3.300 ms [texture] texture-filter=nearest: FPS: 375 FrameTime: 2.667 ms [texture] texture-filter=linear: FPS: 345 FrameTime: 2.899 ms [texture] texture-filter=mipmap: FPS: 289 FrameTime: 3.460 ms [shading] shading=gouraud: FPS: 199 FrameTime: 5.025 ms [shading] shading=blinn-phong-inf: FPS: 145 FrameTime: 6.897 ms [shading] shading=phong: FPS: 85 FrameTime: 11.765 ms [shading] shading=cel: FPS: 84 FrameTime: 11.905 ms [bump] bump-render=high-poly: FPS: 80 FrameTime: 12.500 ms [bump] bump-render=normals: FPS: 461 FrameTime: 2.169 ms [bump] bump-render=height: FPS: 390 FrameTime: 2.564 ms [effect2d] kernel=0,1,0;1,-4,1;0,1,0;: FPS: 161 FrameTime: 6.211 ms [effect2d] kernel=1,1,1,1,1;1,1,1,1,1;1,1,1,1,1;: FPS: 85 FrameTime: 11.765 ms [pulsar] light=false:quads=5:texture=false: FPS: 314 FrameTime: 3.185 ms [desktop] blur-radius=5:effect=blur:passes=1:separable=true:windows=4: FPS: 40 FrameTime: 25.000 ms [desktop] effect=shadow:windows=4: FPS: 121 FrameTime: 8.264 ms [buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 59 FrameTime: 16.949 ms [buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=subdata: FPS: 59 FrameTime: 16.949 ms [buffer] columns=200:interleave=true:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 75 FrameTime: 13.333 ms [ideas] speed=duration: FPS: 269 FrameTime: 3.717 ms [jellyfish] : FPS: 138 FrameTime: 7.246 ms [terrain] : FPS: 5 FrameTime: 200.000 ms [shadow] : FPS: 106 FrameTime: 9.434 ms [refract] : FPS: 21 FrameTime: 47.619 ms [conditionals] fragment-steps=0:vertex-steps=0: FPS: 392 FrameTime: 2.551 ms [conditionals] fragment-steps=5:vertex-steps=0: FPS: 259 FrameTime: 3.861 ms [conditionals] fragment-steps=0:vertex-steps=5: FPS: 389 FrameTime: 2.571 ms [function] fragment-complexity=low:fragment-steps=5: FPS: 357 FrameTime: 2.801 ms [function] fragment-complexity=medium:fragment-steps=5: FPS: 48 FrameTime: 20.833 ms [loop] fragment-loop=false:fragment-steps=5:vertex-steps=5: FPS: 329 FrameTime: 3.040 ms [loop] fragment-steps=5:fragment-uniform=false:vertex-steps=5: FPS: 329 FrameTime: 3.040 ms [loop] fragment-steps=5:fragment-uniform=true:vertex-steps=5: FPS: 119 FrameTime: 8.403 ms ======================================================= glmark2 Score: 203 ======================================================= GLMark2 Fullscreen root@RPi3:/home/oopsmonk# glmark2-es2-wayland --fullscreen ======================================================= glmark2 2014.03 ======================================================= OpenGL Information GL_VENDOR: Broadcom GL_RENDERER: Gallium 0.4 on VC4 V3D 2.1 GL_VERSION: OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148) ======================================================= [build] use-vbo=false: FPS: 183 FrameTime: 5.464 ms [build] use-vbo=true: FPS: 200 FrameTime: 5.000 ms [texture] texture-filter=nearest: FPS: 198 FrameTime: 5.051 ms [texture] texture-filter=linear: FPS: 192 FrameTime: 5.208 ms [texture] texture-filter=mipmap: FPS: 190 FrameTime: 5.263 ms [shading] shading=gouraud: FPS: 166 FrameTime: 6.024 ms [shading] shading=blinn-phong-inf: FPS: 162 FrameTime: 6.173 ms [shading] shading=phong: FPS: 134 FrameTime: 7.463 ms [shading] shading=cel: FPS: 128 FrameTime: 7.812 ms [bump] bump-render=high-poly: FPS: 77 FrameTime: 12.987 ms [bump] bump-render=normals: FPS: 202 FrameTime: 4.950 ms [bump] bump-render=height: FPS: 188 FrameTime: 5.319 ms [effect2d] kernel=0,1,0;1,-4,1;0,1,0;: FPS: 65 FrameTime: 15.385 ms [effect2d] kernel=1,1,1,1,1;1,1,1,1,1;1,1,1,1,1;: FPS: 33 FrameTime: 30.303 ms [pulsar] light=false:quads=5:texture=false: FPS: 173 FrameTime: 5.780 ms [desktop] blur-radius=5:effect=blur:passes=1:separable=true:windows=4: FPS: 16 FrameTime: 62.500 ms [desktop] effect=shadow:windows=4: FPS: 48 FrameTime: 20.833 ms [buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 51 FrameTime: 19.608 ms [buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=subdata: FPS: 51 FrameTime: 19.608 ms [buffer] columns=200:interleave=true:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 51 FrameTime: 19.608 ms [ideas] speed=duration: FPS: 126 FrameTime: 7.937 ms [jellyfish] : FPS: 70 FrameTime: 14.286 ms [terrain] : FPS: 2 FrameTime: 500.000 ms [shadow] : FPS: 84 FrameTime: 11.905 ms [refract] : FPS: 17 FrameTime: 58.824 ms [conditionals] fragment-steps=0:vertex-steps=0: FPS: 205 FrameTime: 4.878 ms [conditionals] fragment-steps=5:vertex-steps=0: FPS: 122 FrameTime: 8.197 ms [conditionals] fragment-steps=0:vertex-steps=5: FPS: 209 FrameTime: 4.785 ms [function] fragment-complexity=low:fragment-steps=5: FPS: 176 FrameTime: 5.682 ms [function] fragment-complexity=medium:fragment-steps=5: FPS: 79 FrameTime: 12.658 ms [loop] fragment-loop=false:fragment-steps=5:vertex-steps=5: FPS: 171 FrameTime: 5.848 ms [loop] fragment-steps=5:fragment-uniform=false:vertex-steps=5: FPS: 172 FrameTime: 5.814 ms [loop] fragment-steps=5:fragment-uniform=true:vertex-steps=5: FPS: 58 FrameTime: 17.241 ms ======================================================= glmark2 Score: 121 ======================================================= GLMark2 repaint time glmark2 set eglSwapInterval() to 0, so it will not waite for vblank.\ncanvas_clear: glClearColor, glClearDepthf, glClear\nsence_draw: glBindBuffer, glBindBuffer\nsence_update: update frame counter and elapsed time\ncanvas_update: eglSwapBuffers, wl_display_roundtrip\ntotal_draw: canvas_clear + sence_draw + canvas_update\n","wordCount":"1451","inLanguage":"en","datePublished":"2017-06-05T09:39:30+08:00","dateModified":"2017-06-05T09:39:30+08:00","author":{"@type":"Person","name":"oopsmonk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://oopsmonk.github.io/posts/2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend/"},"publisher":{"@type":"Organization","name":"oopsmonk","logo":{"@type":"ImageObject","url":"https://oopsmonk.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://oopsmonk.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://oopsmonk.github.io/images/bio-oopsmonk.jpg alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://oopsmonk.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://oopsmonk.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://oopsmonk.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://oopsmonk.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://oopsmonk.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://oopsmonk.github.io/posts/>Posts</a></div><h1 class=post-title>RaspberryPi3: GLMark2 using weston with DRM backend</h1><div class=post-meta><span title="2017-06-05 09:39:30 +0800 +0800">June 5, 2017</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;oopsmonk&nbsp;|&nbsp;<a href=https://github.com/oopsmonk/oopsmonk.github.io/issues rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>How to use weston with DRM backend in Raspbian, and gets benchmark score by GLMark2.<br>With regards to hardware acceleration, We can enable VC4 driver through <code>raspi-config</code>.</p><pre tabindex=0><code># update system and raspi-config script
$ sudo apt-get update &amp;&amp; sudo apt-get upgrade  
$ sudo apt-get install raspi-config

# enable Broadcom VC4 driver 
$ sudo raspi-config
Advanced Options -&gt; GL Driver -&gt; GL (Full KMS)  
</code></pre><p>Test environment:</p><ul><li>2017-04-10-raspbian-jessie-lite</li><li>HDMI 1080P 60Hz</li><li>CPU/GPU use default settings(no overclock)</li></ul><p>Test packages:</p><ul><li>wayland 1.13.0</li><li>libdrm-2.4.81</li><li>mesa-17.1.1</li><li>pixman-0.34.0</li><li>cairo 1.15.4</li><li>weston 2.0.0</li></ul><p>In my case, it took about 2.5 hours for clone and compile all packages, so go jogging is a great choice. :-)<br>Build script: <a href=/resource/2017-06-05/RPi3_build_weston.sh>RPi3_build_weston.sh</a></p><pre tabindex=0><code>$ cd ~ &amp;&amp; sudo su
# ./RPi3_build_weston.sh all
</code></pre><h2 id=run-weston>Run weston<a hidden class=anchor aria-hidden=true href=#run-weston>#</a></h2><pre tabindex=0><code>$ sudo su
# export XDG_RUNTIME_DIR=/tmp/weston_runtime
# mkdir $XDG_RUNTIME_DIR &amp;&amp; chmod 0700 $XDG_RUNTIME_DIR
# export LD_LIBRARY_PATH=/usr/local/lib/
# weston --tty=2 --idle-time=0 -B drm-backend.so &amp;

Date: 2017-06-02 CST
[09:52:59.501] weston 2.0.0
               http://wayland.freedesktop.org
               Bug reports to: https://bugs.freedesktop.org/enter_bug.cgi?product=Wayland&amp;component=weston&amp;version=2.0.0
               Build: 2.0.0 configure.ac: bump to version 2.0.0 for the official release (2017-02-24 16:19:03 -0800)
[09:52:59.506] Command line: weston --tty=2 --idle-time=0 -B drm-backend.so
[09:52:59.507] OS: Linux, 4.9.24-v7+, #993 SMP Wed Apr 26 18:01:23 BST 2017, armv7l
[09:52:59.509] warning: XDG_RUNTIME_DIR &#34;/tmp/weston_runtime&#34; is not configured
correctly.  Unix access mode must be 0700 (current mode is 700),
and must be owned by the user (current owner is UID 1001).
Refer to your distribution on how to get it, or
http://www.freedesktop.org/wiki/Specifications/basedir-spec
on how to implement it.
[09:52:59.513] Starting with no config file.
[09:52:59.515] Output repaint window is 7 ms maximum.
[09:52:59.516] Loading module &#39;/usr/local/lib/libweston-2/drm-backend.so&#39;
[09:52:59.520] initializing drm backend
[09:52:59.526] using /dev/dri/card0
[09:52:59.528] Loading module &#39;/usr/local/lib/libweston-2/gl-renderer.so&#39;
[09:52:59.586] EGL client extensions: EGL_EXT_client_extensions
               EGL_EXT_platform_base EGL_KHR_client_get_all_proc_addresses
               EGL_KHR_debug EGL_EXT_platform_wayland EGL_MESA_platform_gbm
[09:52:59.588] warning: neither EGL_EXT_swap_buffers_with_damage or EGL_KHR_swap_buffers_with_damage is supported. Performance could be affected.
[09:52:59.588] EGL_KHR_surfaceless_context available
[09:52:59.596] EGL version: 1.4 (DRI2)
[09:52:59.596] EGL vendor: Mesa Project
[09:52:59.596] EGL client APIs: OpenGL OpenGL_ES 
[09:52:59.597] EGL extensions: EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import
               EGL_KHR_cl_event2 EGL_KHR_config_attribs EGL_KHR_create_context
               EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses
               EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image
               EGL_KHR_gl_texture_cubemap_image EGL_KHR_image
               EGL_KHR_image_base EGL_KHR_image_pixmap
               EGL_KHR_no_config_context EGL_KHR_reusable_sync
               EGL_KHR_surfaceless_context EGL_KHR_wait_sync
               EGL_MESA_configless_context EGL_MESA_drm_image
               EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display
[09:52:59.597] GL version: OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148)
[09:52:59.598] GLSL version: OpenGL ES GLSL ES 1.0.16
[09:52:59.598] GL vendor: Broadcom
[09:52:59.598] GL renderer: Gallium 0.4 on VC4 V3D 2.1
[09:52:59.598] GL extensions: GL_EXT_blend_minmax GL_EXT_multi_draw_arrays
               GL_EXT_texture_format_BGRA8888
               GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24
               GL_OES_element_index_uint GL_OES_fbo_render_mipmap
               GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_stencil8
               GL_OES_texture_3D GL_OES_texture_npot GL_OES_vertex_half_float
               GL_OES_EGL_image GL_OES_depth_texture
               GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV
               GL_OES_get_program_binary GL_APPLE_texture_max_level
               GL_EXT_discard_framebuffer GL_EXT_read_format_bgra
               GL_EXT_frag_depth GL_NV_fbo_color_attachments
               GL_OES_EGL_image_external GL_OES_EGL_sync
               GL_OES_vertex_array_object GL_EXT_unpack_subimage
               GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth
               GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers
               GL_EXT_map_buffer_range GL_KHR_debug GL_OES_surfaceless_context
               GL_EXT_separate_shader_objects
               GL_EXT_compressed_ETC1_RGB8_sub_texture
               GL_EXT_draw_elements_base_vertex GL_EXT_texture_border_clamp
               GL_KHR_context_flush_control GL_OES_draw_elements_base_vertex
               GL_OES_texture_border_clamp
[09:52:59.599] GL ES 2 renderer features:
               read-back format: BGRA
               wl_shm sub-image to texture: yes
               EGL Wayland extension: yes
[09:52:59.601] event0  - [09:52:59.601] USB Keyboard: [09:52:59.601] is tagged by udev as: Keyboard
[09:52:59.601] event0  - [09:52:59.601] USB Keyboard: [09:52:59.601] device is a keyboard
[09:52:59.602] event1  - [09:52:59.602] USB Keyboard: [09:52:59.602] is tagged by udev as: Keyboard
[09:52:59.602] event1  - [09:52:59.602] USB Keyboard: [09:52:59.602] device is a keyboard
[09:52:59.603] event2  - [09:52:59.603] USB Optical Mouse: [09:52:59.603] is tagged by udev as: Mouse
[09:52:59.603] event2  - [09:52:59.604] USB Optical Mouse: [09:52:59.604] device is a pointer
[09:52:59.654] Registered plugin API &#39;weston_drm_output_api_v1&#39; of size 12
[09:52:59.655] Chosen EGL config details:
               RGBA bits: 8 8 8 0
               swap interval range: 0 - 0
[09:52:59.655] Failed to initialize backlight
[09:52:59.655] EDID data &#39;BNQ&#39;, &#39;BenQ GW2265&#39;, &#39;87E05314019&#39;
[09:52:59.656] Output HDMI-A-1, (connector 24, crtc 65)
               mode 1920x1080@60.0, preferred, current
               mode 1920x1080@59.9
               mode 1920x1080@60.0
               mode 1920x1080@59.9
               mode 1920x1080@50.0
               mode 1920x1080@50.0
               mode 1680x1050@59.9
               mode 1600x900@60.0
               mode 1280x1024@60.0
               mode 1280x800@59.9
               mode 1280x720@60.0
               mode 1280x720@59.9
               mode 1280x720@50.0
               mode 1024x768@60.0
               mode 800x600@60.3
               mode 720x576@50.0
               mode 720x576@50.0
               mode 720x480@60.0
               mode 720x480@59.9
               mode 720x480@60.0
               mode 720x480@59.9
               mode 640x480@60.0
               mode 640x480@59.9
[09:52:59.656] Compositor capabilities:
               arbitrary surface rotation: yes
               screen capture uses y-flip: yes
               presentation clock: CLOCK_MONOTONIC, id 1
               presentation clock resolution: 0.000000001 s
[09:52:59.657] Loading module &#39;/usr/local/lib/weston/desktop-shell.so&#39;
[09:52:59.658] launching &#39;/usr/local/libexec/weston-keyboard&#39;
[09:52:59.660] launching &#39;/usr/local/libexec/weston-desktop-shell&#39;
could not load cursor &#39;dnd-move&#39;
could not load cursor &#39;dnd-copy&#39;
could not load cursor &#39;dnd-none&#39;
could not load cursor &#39;dnd-move&#39;
could not load cursor &#39;dnd-copy&#39;
could not load cursor &#39;dnd-none&#39;
xkbcommon: ERROR: couldn&#39;t find a Compose file for locale &#34;en_US.UTF-8&#34;
could not create XKB compose table for locale &#39;en_US.UTF-8&#39;.  Disabiling compose
xkbcommon: ERROR: couldn&#39;t find a Compose file for locale &#34;en_US.UTF-8&#34;
could not create XKB compose table for locale &#39;en_US.UTF-8&#39;.  Disabiling compose
could not load cursor &#39;dnd-move&#39;
could not load cursor &#39;dnd-copy&#39;
could not load cursor &#39;dnd-none&#39;
xkbcommon: ERROR: couldn&#39;t find a Compose file for locale &#34;en_US.UTF-8&#34;
could not create XKB compose table for locale &#39;en_US.UTF-8&#39;.  Disabiling compose
</code></pre><h3 id=weston-simple-egl-score>weston-simple-egl score<a hidden class=anchor aria-hidden=true href=#weston-simple-egl-score>#</a></h3><pre tabindex=0><code>root@RPi3:/home/oopsmonk# weston-simple-egl 
has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage
152 frames in 5 seconds: 30.400000 fps
151 frames in 5 seconds: 30.200001 fps
151 frames in 5 seconds: 30.200001 fps
^Csimple-egl exiting

root@RPi3:/home/oopsmonk# weston-simple-egl -b
has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage
32542 frames in 5 seconds: 6508.399902 fps
Draw call returned Invalid argument.  Expect corruption.
30634 frames in 5 seconds: 6126.799805 fps
28265 frames in 5 seconds: 5653.000000 fps
34501 frames in 5 seconds: 6900.200195 fps
32658 frames in 5 seconds: 6531.600098 fps
^Csimple-egl exiting

root@RPi3:/home/oopsmonk# weston-simple-egl -f
has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage
300 frames in 5 seconds: 60.000000 fps
300 frames in 5 seconds: 60.000000 fps
300 frames in 5 seconds: 60.000000 fps
300 frames in 5 seconds: 60.000000 fps
300 frames in 5 seconds: 60.000000 fps
^Csimple-egl exiting

root@RPi3:/home/oopsmonk# weston-simple-egl -f -b
has EGL_EXT_buffer_age and EGL_EXT_swap_buffers_with_damage
1350 frames in 5 seconds: 270.000000 fps
1325 frames in 5 seconds: 265.000000 fps
1325 frames in 5 seconds: 265.000000 fps
^Csimple-egl exiting
</code></pre><h3 id=glmark2>GLMark2<a hidden class=anchor aria-hidden=true href=#glmark2>#</a></h3><pre tabindex=0><code>root@RPi3:/home/oopsmonk# glmark2-es2-wayland 
=======================================================
    glmark2 2014.03
=======================================================
    OpenGL Information
    GL_VENDOR:     Broadcom
    GL_RENDERER:   Gallium 0.4 on VC4 V3D 2.1
    GL_VERSION:    OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148)
=======================================================
[build] use-vbo=false: FPS: 281 FrameTime: 3.559 ms
[build] use-vbo=true: FPS: 303 FrameTime: 3.300 ms
[texture] texture-filter=nearest: FPS: 375 FrameTime: 2.667 ms
[texture] texture-filter=linear: FPS: 345 FrameTime: 2.899 ms
[texture] texture-filter=mipmap: FPS: 289 FrameTime: 3.460 ms
[shading] shading=gouraud: FPS: 199 FrameTime: 5.025 ms
[shading] shading=blinn-phong-inf: FPS: 145 FrameTime: 6.897 ms
[shading] shading=phong: FPS: 85 FrameTime: 11.765 ms
[shading] shading=cel: FPS: 84 FrameTime: 11.905 ms
[bump] bump-render=high-poly: FPS: 80 FrameTime: 12.500 ms
[bump] bump-render=normals: FPS: 461 FrameTime: 2.169 ms
[bump] bump-render=height: FPS: 390 FrameTime: 2.564 ms
[effect2d] kernel=0,1,0;1,-4,1;0,1,0;: FPS: 161 FrameTime: 6.211 ms
[effect2d] kernel=1,1,1,1,1;1,1,1,1,1;1,1,1,1,1;: FPS: 85 FrameTime: 11.765 ms
[pulsar] light=false:quads=5:texture=false: FPS: 314 FrameTime: 3.185 ms
[desktop] blur-radius=5:effect=blur:passes=1:separable=true:windows=4: FPS: 40 FrameTime: 25.000 ms
[desktop] effect=shadow:windows=4: FPS: 121 FrameTime: 8.264 ms
[buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 59 FrameTime: 16.949 ms
[buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=subdata: FPS: 59 FrameTime: 16.949 ms
[buffer] columns=200:interleave=true:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 75 FrameTime: 13.333 ms
[ideas] speed=duration: FPS: 269 FrameTime: 3.717 ms
[jellyfish] &lt;default&gt;: FPS: 138 FrameTime: 7.246 ms
[terrain] &lt;default&gt;: FPS: 5 FrameTime: 200.000 ms
[shadow] &lt;default&gt;: FPS: 106 FrameTime: 9.434 ms
[refract] &lt;default&gt;: FPS: 21 FrameTime: 47.619 ms
[conditionals] fragment-steps=0:vertex-steps=0: FPS: 392 FrameTime: 2.551 ms
[conditionals] fragment-steps=5:vertex-steps=0: FPS: 259 FrameTime: 3.861 ms
[conditionals] fragment-steps=0:vertex-steps=5: FPS: 389 FrameTime: 2.571 ms
[function] fragment-complexity=low:fragment-steps=5: FPS: 357 FrameTime: 2.801 ms
[function] fragment-complexity=medium:fragment-steps=5: FPS: 48 FrameTime: 20.833 ms
[loop] fragment-loop=false:fragment-steps=5:vertex-steps=5: FPS: 329 FrameTime: 3.040 ms
[loop] fragment-steps=5:fragment-uniform=false:vertex-steps=5: FPS: 329 FrameTime: 3.040 ms
[loop] fragment-steps=5:fragment-uniform=true:vertex-steps=5: FPS: 119 FrameTime: 8.403 ms
=======================================================
                                  glmark2 Score: 203 
=======================================================
</code></pre><h3 id=glmark2-fullscreen>GLMark2 Fullscreen<a hidden class=anchor aria-hidden=true href=#glmark2-fullscreen>#</a></h3><pre tabindex=0><code>root@RPi3:/home/oopsmonk# glmark2-es2-wayland --fullscreen
=======================================================
    glmark2 2014.03
=======================================================
    OpenGL Information
    GL_VENDOR:     Broadcom
    GL_RENDERER:   Gallium 0.4 on VC4 V3D 2.1
    GL_VERSION:    OpenGL ES 2.0 Mesa 17.1.1 (git-ca0a148)
=======================================================
[build] use-vbo=false: FPS: 183 FrameTime: 5.464 ms
[build] use-vbo=true: FPS: 200 FrameTime: 5.000 ms
[texture] texture-filter=nearest: FPS: 198 FrameTime: 5.051 ms
[texture] texture-filter=linear: FPS: 192 FrameTime: 5.208 ms
[texture] texture-filter=mipmap: FPS: 190 FrameTime: 5.263 ms
[shading] shading=gouraud: FPS: 166 FrameTime: 6.024 ms
[shading] shading=blinn-phong-inf: FPS: 162 FrameTime: 6.173 ms
[shading] shading=phong: FPS: 134 FrameTime: 7.463 ms
[shading] shading=cel: FPS: 128 FrameTime: 7.812 ms
[bump] bump-render=high-poly: FPS: 77 FrameTime: 12.987 ms
[bump] bump-render=normals: FPS: 202 FrameTime: 4.950 ms
[bump] bump-render=height: FPS: 188 FrameTime: 5.319 ms
[effect2d] kernel=0,1,0;1,-4,1;0,1,0;: FPS: 65 FrameTime: 15.385 ms
[effect2d] kernel=1,1,1,1,1;1,1,1,1,1;1,1,1,1,1;: FPS: 33 FrameTime: 30.303 ms
[pulsar] light=false:quads=5:texture=false: FPS: 173 FrameTime: 5.780 ms
[desktop] blur-radius=5:effect=blur:passes=1:separable=true:windows=4: FPS: 16 FrameTime: 62.500 ms
[desktop] effect=shadow:windows=4: FPS: 48 FrameTime: 20.833 ms
[buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 51 FrameTime: 19.608 ms
[buffer] columns=200:interleave=false:update-dispersion=0.9:update-fraction=0.5:update-method=subdata: FPS: 51 FrameTime: 19.608 ms
[buffer] columns=200:interleave=true:update-dispersion=0.9:update-fraction=0.5:update-method=map: FPS: 51 FrameTime: 19.608 ms
[ideas] speed=duration: FPS: 126 FrameTime: 7.937 ms
[jellyfish] &lt;default&gt;: FPS: 70 FrameTime: 14.286 ms
[terrain] &lt;default&gt;: FPS: 2 FrameTime: 500.000 ms
[shadow] &lt;default&gt;: FPS: 84 FrameTime: 11.905 ms
[refract] &lt;default&gt;: FPS: 17 FrameTime: 58.824 ms
[conditionals] fragment-steps=0:vertex-steps=0: FPS: 205 FrameTime: 4.878 ms
[conditionals] fragment-steps=5:vertex-steps=0: FPS: 122 FrameTime: 8.197 ms
[conditionals] fragment-steps=0:vertex-steps=5: FPS: 209 FrameTime: 4.785 ms
[function] fragment-complexity=low:fragment-steps=5: FPS: 176 FrameTime: 5.682 ms
[function] fragment-complexity=medium:fragment-steps=5: FPS: 79 FrameTime: 12.658 ms
[loop] fragment-loop=false:fragment-steps=5:vertex-steps=5: FPS: 171 FrameTime: 5.848 ms
[loop] fragment-steps=5:fragment-uniform=false:vertex-steps=5: FPS: 172 FrameTime: 5.814 ms
[loop] fragment-steps=5:fragment-uniform=true:vertex-steps=5: FPS: 58 FrameTime: 17.241 ms
=======================================================
                                  glmark2 Score: 121 
=======================================================
</code></pre><h3 id=glmark2-repaint-time>GLMark2 repaint time<a hidden class=anchor aria-hidden=true href=#glmark2-repaint-time>#</a></h3><p>glmark2 set eglSwapInterval() to 0, so it will not waite for vblank.</p><p><strong>canvas_clear</strong>: glClearColor, glClearDepthf, glClear<br><strong>sence_draw</strong>: glBindBuffer, glBindBuffer<br><strong>sence_update</strong>: update frame counter and elapsed time<br><strong>canvas_update</strong>: eglSwapBuffers, wl_display_roundtrip<br><strong>total_draw</strong>: canvas_clear + sence_draw + canvas_update</p><p><img loading=lazy src=/images/2017-06-05/RPi3_jellyfish_100f.png alt></p><p><img loading=lazy src=/images/2017-06-05/RPi3_refract_100f.png alt></p><p><img loading=lazy src=/images/2017-06-05/RPi3_shadow_100f.png alt></p><p><img loading=lazy src=/images/2017-06-05/RPi3_terrain.png alt></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://oopsmonk.github.io/tags/raspberrypi/>RaspberryPi</a></li></ul><nav class=paginav><a class=prev href=https://oopsmonk.github.io/posts/2017-06-13-linux-memory-management/><span class=title>« Prev Page</span><br><span>[Paper] - An Evolutionary Study of Linux Memory Management for Fun and Profit</span></a>
<a class=next href=https://oopsmonk.github.io/posts/2017-05-31-2017month5/><span class=title>Next Page »</span><br><span>LGS Hell</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on twitter" href="https://twitter.com/intent/tweet/?text=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend&url=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f&hashtags=RaspberryPi"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f&title=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend&summary=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend&source=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on reddit" href="https://reddit.com/submit?url=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f&title=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on whatsapp" href="https://api.whatsapp.com/send?text=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend%20-%20https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share RaspberryPi3: GLMark2 using weston with DRM backend on telegram" href="https://telegram.me/share/url?text=RaspberryPi3%3a%20GLMark2%20using%20weston%20with%20DRM%20backend&url=https%3a%2f%2foopsmonk.github.io%2fposts%2f2017-06-05-raspberrypi3-glmark2-using-weston-with-drm-backend%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://oopsmonk.github.io/>oopsmonk</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>