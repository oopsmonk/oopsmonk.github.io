<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | oopsmonk</title><meta name=keywords content><meta name=description content="Posts - oopsmonk"><meta name=author content="oopsmonk"><link rel=canonical href=https://oopsmonk.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://oopsmonk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://oopsmonk.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://oopsmonk.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://oopsmonk.github.io/apple-touch-icon.png><link rel=mask-icon href=https://oopsmonk.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://oopsmonk.github.io/posts/index.xml><link rel=alternate hreflang=en href=https://oopsmonk.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=364511140"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","364511140")}</script><meta property="og:url" content="https://oopsmonk.github.io/posts/"><meta property="og:site_name" content="oopsmonk"><meta property="og:title" content="Posts"><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta property="og:image" content="https://oopsmonk.github.io/images/bio-oopsmonk.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://oopsmonk.github.io/images/bio-oopsmonk.jpg"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://oopsmonk.github.io/posts/"}]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://oopsmonk.github.io/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://oopsmonk.github.io/posts/ title=Posts><span class=active>Posts</span></a></li><li><a href=https://oopsmonk.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://oopsmonk.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://oopsmonk.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://oopsmonk.github.io/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Adoptable Storage</h2></header><div class=entry-content><p>A study of adoptable storage in Android Marshmallow and Nougat.
How to Setup a Private Disk (External USB Storage) Android adoptable storage allow APP install to external storage that can reserve more internal space for other APPs.
Create Adoptable Storage Using Settings GUI Settings -> Storage & USB -> Portable storage -> Settings -> Format as internal
Use sm (Storage Manager) Command Find disk id # sm list-disks disk:8,16 disk:8,0 Format as internal # sm partition disk:8,0 private # sm list-volumes all public:8,17 mounted 629C-FBAF emulated:8,2 unmounted null private mounted null emulated mounted null private:8,2 mounted 3f538e6e-e6a9-4163-ac1e-e4c6602b3c34 Now, it’s a private storage in system.
...</p></div><footer class=entry-footer><span title='2017-02-13 10:08:28 +0800 +0800'>February 13, 2017</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Android Adoptable Storage" href=https://oopsmonk.github.io/posts/2017-02-13-android-adoptable-storage/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Media Framework</h2></header><div class=entry-content><p>Android APIs for media playback: MediaPlayer and MediaCodec.
MediaPlayer mediaPlayer.setDataSource(path); //fd or url mediaPlayer.setDisplay(SurfaceHolder sh); //SurfaceView or VideoView mediaPlayer.prepare(); // MediaPlayer.start(); // MediaCodec /* init use MediaExtractor to get mime data create decoder by mime type configure decoder by video format and surface view */ MediaExtractor mExtractor; MediaCodec mDecoder; mExtractor = new MediaExtractor(); mExtractor.setDataSource(filePath); MediaFormat format = mExtractor.getTrackFormat(track_index); String mime = format.getString(MediaFormat.KEY_MIME); if mime.startsWith("video/") mExtractor.selectTrack(track_index); mDecoder = MediaCodec.createDecoderByType(mime); mDecoder.configure(format, surface, null, 0 /* Decoder */); mDecoder.start(); /*run start decode video, fill / empty buffer */ MediaCodecExample
...</p></div><footer class=entry-footer><span title='2016-06-16 15:45:54 +0800 +0800'>June 16, 2016</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Android Media Framework" href=https://oopsmonk.github.io/posts/2016-06-16-android-media-framework/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android build error on Ubuntu 16.04 LTS</h2></header><div class=entry-content><p>After update system from Ubuntu 14.04 to 16.04, I got some problems, when I was building Android source code.
openjdk-7-jdk is gone Add PPA for OpenJDK7
sudo add-apt-repository ppa:openjdk-r/ppa sudo apt remove openjdk-* icedtea-* icedtea6-* sudo apt update && sudo apt install openjdk-7-jdk git ccache automake lzop bison gperf build-essential zip curl zlib1g-dev zlib1g-dev:i386 g++-multilib python-networkx libxml2-utils bzip2 libbz2-dev libbz2-1.0 libghc-bzlib-dev squashfs-tools pngcrush schedtool dpkg-dev liblz4-tool make optipng maven If you have other java version in system, make sure your java version is correct.
...</p></div><footer class=entry-footer><span title='2016-06-07 13:21:48 +0800 +0800'>June 7, 2016</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Android build error on Ubuntu 16.04 LTS" href=https://oopsmonk.github.io/posts/2016-06-07-android-build-error-on-ubuntu-16-04-lts/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android Full Disk Encryption Workflow (default encryption)</h2></header><div class=entry-content><p>This study is based on Android Marshmallow.
Android full disk encryption use dm-crypt, which works with block devices. Please refer to the following docs for more detail:
Full Disk Encryption
How to setup full disk encryption Android support forceencrypt and encryptable encryption flags, and only support ext4 and f2fs file systems.
Setup forceencrypt fstab.bullhead:
/dev/block/platform/soc.0/f9824900.sdhci/by-name/userdata /data ext4 noatime,nosuid,nodev,barrier=1,data=ordered,nomblk_io_submit,noauto_da_alloc,errors=panic wait,check,forceencrypt=/dev/block/platform/soc.0/f9824900.sdhci/by-name/metadata Setup encryptable fstab.hammerhead:
/dev/block/platform/msm_sdcc.1/by-name/userdata /data ext4 noatime,nosuid,nodev,barrier=1,data=ordered,nomblk_io_submit,noauto_da_alloc,errors=panic wait,check,encryptable=/dev/block/platform/msm_sdcc.1/by-name/metadata Related Properties and source code location Related source code:
...</p></div><footer class=entry-footer><span title='2016-04-29 09:51:48 +0800 +0800'>April 29, 2016</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Android Full Disk Encryption Workflow (default encryption)" href=https://oopsmonk.github.io/posts/2016-04-29-android-full-disk-encryption-workflow/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>LibCEC on Raspberry Pi</h2></header><div class=entry-content><p>Install requirements sudo apt-get install build-essential autoconf liblockdev1-dev \ libudev-dev git libtool pkg-config cmake libxrandr-dev -y Python and Swing support (Optional)
sudo apt-get install python-dev swig -y Checkout and build libcec source code The current version is libcec-3.0.1, but I got an error as follows:
make[2]: *** No rule to make target '1', needed by 'src/libcec/libcec.so.3.0.1'. Stop. Using libcec-3.0.0 instead of libcec-3.0.1, it’s work properly.
git clone https://github.com/Pulse-Eight/libcec.git cd libcec git checkout libcec-3.0.0 -b cec3.0.0 Checkout platform source
...</p></div><footer class=entry-footer><span title='2015-11-03 14:44:47 +0800 +0800'>November 3, 2015</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to LibCEC on Raspberry Pi" href=https://oopsmonk.github.io/posts/2015-11-03-libcec-on-raspberry-pi/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Firefox is Really Slow</h2></header><div class=entry-content><p>Firefox is extremely slow on my system, include menu, right-click, tab opening…etc.
Mozilla Firefox 40.0
Xubuntu 14.04 LTS 64-bit
Linux 3.16.0-45-generic #60~14.04.1-Ubuntu SMP Fri Jul 24 21:16:23 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
After I turned off hardware acceleration, everything is fine.
Type this in the browser’s address bar to trun it off:
about:preferences#advanced</p></div><footer class=entry-footer><span title='2015-08-18 10:45:44 +0800 +0800'>August 18, 2015</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Firefox is Really Slow" href=https://oopsmonk.github.io/posts/2015-08-18-firefox-is-really-slow/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Markdown Preview Use Sublime Text 3</h2></header><div class=entry-content><p>Download Sublime Text 3 http://www.sublimetext.com/3
Install Package Control https://packagecontrol.io/installation#st3
Use Ctrl + ` or View > Show Console open the Sublime Text console.
Copy the text into console and press Enter to install Package Control.
Once finished installation, restart Sublime.
Install Markdown Preview package Open command palette via Ctrl + Shift + p or Preferences > Package Control from menu.
After typing install and press Enter, it will pop-up a package menu.
...</p></div><footer class=entry-footer><span title='2015-08-12 19:03:54 +0800 +0800'>August 12, 2015</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;oopsmonk</footer><a class=entry-link aria-label="post link to Markdown Preview Use Sublime Text 3" href=https://oopsmonk.github.io/posts/2015-08-12-markdown-preview-use-sublime-text-3/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://oopsmonk.github.io/posts/page/6/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://oopsmonk.github.io/posts/page/8/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://oopsmonk.github.io/>oopsmonk</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js integrity="sha512-J3G1KdOKUuj92x5w2mV/7AmPckHbiTQdoPXd6qaeHemfcNOsuwFVQm851m+lLuJR33sGuz9TAzWtccXZOsFE0Q==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{mediumZoom(e,{background:"#808B96",margin:30,scrollOffset:30,container:null,template:null})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>